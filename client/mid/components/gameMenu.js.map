{"version":3,"file":"gameMenu.js","sourceRoot":"","sources":["../../src/components/gameMenu.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { SIDE } from \"../config\";\r\nimport { GAMEMODE } from \"../game\";\r\nimport ColorSelection from \"./colorSelection\"\r\n\r\n\r\ntype Color = \"black\" | \"white\";\r\n\r\ntype Props = {\r\n\r\n}\r\n\r\ntype State = {\r\n    gameTypeVisibility: \"game-menu__game-type--hidden\" | \"game-menu__game-type--visible\";\r\n    colorVisibility: \"game-menu__color--visible\" | \"game-menu__color--hidden\";\r\n    newGameSelect: \"\" | \"game-menu__game-type--selected\";\r\n    gameSelect: \"\" | \"selected-menu\"\r\n}\r\n\r\n\r\nexport default class GameMenu extends React.Component<Props, State> {\r\n\r\n    props: {\r\n        startNewGame: (gameMode: GAMEMODE, side: SIDE, color: Color) => boolean;\r\n        centered: boolean;\r\n        error: string;\r\n    }\r\n\r\n    menuRef: React.RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.props = props;\r\n        this.state = {\r\n            gameTypeVisibility: \"game-menu__game-type--hidden\",\r\n            colorVisibility: \"game-menu__color--hidden\",\r\n            newGameSelect: \"\",\r\n            gameSelect: \"\"\r\n        }\r\n        this.menuRef = React.createRef()\r\n    }\r\n\r\n    hideAndUnselectAll() {\r\n        this.setState({\r\n            gameTypeVisibility: \"game-menu__game-type--hidden\",\r\n            colorVisibility: \"game-menu__color--hidden\",\r\n            newGameSelect: \"\",\r\n            gameSelect: \"\"\r\n        })\r\n    }\r\n\r\n    startGame = (event: React.MouseEvent) => {\r\n        let gameMode = GAMEMODE.LOCAL;\r\n        let side = SIDE.NORMAL;\r\n        const target = event.target as HTMLElement;\r\n        if (target) {\r\n            gameMode;\r\n            if (target.closest(\"#local\")) {\r\n                gameMode = GAMEMODE.LOCAL\r\n            } else if (target.closest(\".choose-color\")) {\r\n                gameMode = GAMEMODE.BOT\r\n                if (target.closest(\"#choose-white\")) {\r\n                    side = SIDE.NORMAL;\r\n                } else {\r\n                    side = SIDE.REVERSED\r\n                }\r\n            } else {\r\n                gameMode = GAMEMODE.ONLINE\r\n            }\r\n        }\r\n        const isStarted = this.props.startNewGame(gameMode, side, \"white\");\r\n        if (isStarted) {\r\n            this.hideAndUnselectAll();\r\n        }\r\n    }\r\n\r\n    toggleShowGames = () => {\r\n        if (this.state.gameTypeVisibility == \"game-menu__game-type--hidden\") {\r\n            this.setState({ gameTypeVisibility: 'game-menu__game-type--visible' })\r\n        } else {\r\n            this.setState({ gameTypeVisibility: \"game-menu__game-type--hidden\" })\r\n            this.hideAndUnselectAll();\r\n        }\r\n        this.toggleSelectNewGame();\r\n    }\r\n    toggleShowColor = () => {\r\n        if (this.state.colorVisibility == \"game-menu__color--hidden\") {\r\n            this.setState({ colorVisibility: 'game-menu__color--visible' })\r\n        } else {\r\n            this.setState({ colorVisibility: \"game-menu__color--hidden\" })\r\n        }\r\n        this.toggleSelectGame();\r\n    }\r\n\r\n    toggleSelectNewGame = () => {\r\n        if (this.state.newGameSelect == \"\") {\r\n            this.setState({newGameSelect: \"game-menu__game-type--selected\"})\r\n        } else {\r\n            this.setState({newGameSelect: \"\"})\r\n        }\r\n    }\r\n    toggleSelectGame = () => {\r\n        if (this.state.gameSelect == \"\") {\r\n            this.setState({gameSelect: \"selected-menu\"})\r\n        } else {\r\n            this.setState({gameSelect: \"\"})\r\n        }\r\n    }\r\n\r\n    handleClickOutside = (event: any) => {\r\n        if (this.menuRef.current && !this.menuRef.current.contains(event.target)) {\r\n            this.hideAndUnselectAll();\r\n        }\r\n      }\r\n\r\n    componentDidMount = () => {\r\n        document.addEventListener('mousedown', this.handleClickOutside);\r\n    }\r\n    componentWillUnmount = () => {\r\n        document.removeEventListener('mousedown', this.handleClickOutside);\r\n    }\r\n    \r\n    \r\n\r\n    render() {\r\n        const menuClass = this.props.centered ? \"game-menu--center\" : \"game-menu--float-right\";\r\n        const gameTypeVisibility = this.state.gameTypeVisibility;\r\n        const colorVisibility = this.state.colorVisibility;\r\n        \r\n        return (\r\n            <div className={\"game-menu no-select \" + menuClass} ref={this.menuRef}>\r\n                <div onClick={this.toggleShowGames} className={\"game-menu__new-game \" + this.state.newGameSelect}>\r\n                    <h3>Start new game</h3>\r\n                </div>\r\n                <div className=\"game-menu__games\">\r\n                    <div className={\"game-menu__game-type \" + gameTypeVisibility}\r\n                        id=\"local\"\r\n                        onClick={this.startGame}>\r\n                        Local\r\n                    </div>\r\n                    <div\r\n                        className={\"game-menu__game-type \" + \"game-menu__game-type--vsComp \" + gameTypeVisibility + \" \" + this.state.gameSelect}\r\n\r\n                        onClick={this.toggleShowColor}\r\n                    >\r\n                        Versus computer\r\n                    </div>\r\n                   \r\n                </div>\r\n                <ColorSelection\r\n                    startNewGame={this.props.startNewGame}\r\n                    visibility={colorVisibility}\r\n                />\r\n                <p className=\"game-menu__error\">{this.props.error}</p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n"]}