{"version":3,"file":"winMenu.js","sourceRoot":"","sources":["../../../src/components/board/winMenu.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Game, { GAMEMODE } from \"../../game\";\r\nimport { socket } from \"../../main\";\r\nimport { IPlayer } from \"../lobby/lobby\";\r\nimport { Rematch } from \"../../App\";\r\nimport Avatar from \"../lobby/avatar\";\r\nimport Players from \"../lobby/players\";\r\nimport gameMenu from \"../gameMenu/gameMenu\";\r\n\r\ntype Props = {}\r\ntype State = {\r\n    rematchSent: boolean\r\n}\r\n\r\nexport default class WinMenu extends React.Component<Props, State> {\r\n\r\n    props: {\r\n        winner: \"white\" | \"black\" | \"\";\r\n        restart: (gameId: number) => void,\r\n        game: Game,\r\n        player: IPlayer\r\n        rematch: Rematch | undefined,\r\n    }\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.props = props;\r\n        this.state = {\r\n            rematchSent: false,\r\n        }\r\n    }\r\n    handleClick = () => {\r\n        const props = this.props;\r\n        if (this.props.game.gameMode == GAMEMODE.ONLINE && !this.props.rematch) {\r\n            const rematch = {\r\n                gameId: props.game.id,\r\n                player: props.player,\r\n                requested: true,\r\n                roomId: props.game.roomId\r\n            }\r\n            socket.emit(\"player_wants_rematch\", rematch)\r\n            this.setState({ rematchSent: true });\r\n        } else if (this.props.rematch) {\r\n            const id = props.game.id ? props.game.id : 0;\r\n            this.props.restart(id);\r\n            socket.emit(\"restart_game\", id);\r\n        } else {\r\n            this.props.restart(0);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        socket.on(\"rematch_accepted\", (gameId: number) => {\r\n            this.props.restart(gameId);\r\n        })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        socket.off();\r\n    }\r\n\r\n    render() {\r\n\r\n        let winner: string = this.props.winner\r\n\r\n        const playAgainClass = this.state.rematchSent ? \"win-menu__play-again--selected\" : \"\";\r\n        return (\r\n            <div className={\"win-menu \"}>\r\n                <h1>{winner} Wins!</h1>\r\n                <h2 className={\"win-menu__play-again \" + playAgainClass} onClick={this.handleClick}>Play Again?</h2>\r\n                {this.props.rematch &&\r\n                    <div className=\"win-menu__avatar\">\r\n                        <Avatar name={this.props.player.name}\r\n                            theme={this.props.player.avatar.theme}\r\n                            shape={this.props.player.avatar.shape}\r\n                        />\r\n                    </div>\r\n                }\r\n                {this.props.rematch &&\r\n                    <h3 className={\"win-menu__rematch\"}>\r\n                        {this.props.rematch.player &&\r\n                            this.props.player.name + \" \"}\r\n                        wants rematch!</h3>\r\n                }\r\n                {this.state.rematchSent &&\r\n                    <div className=\"win-menu__waiting-pawn-div\">\r\n                        <img className={\"lobby__avatar-placeholder win-menu__waiting-pawn\"}\r\n                            src={\"./img/pawn.png\"}></img>\r\n                    </div>\r\n                }\r\n\r\n                {this.state.rematchSent &&\r\n                    <h3 className={\"win-menu__rematch\"}>\r\n                        Waiting for {this.props.player.name} to accept\r\n                    </h3>}\r\n            </div>\r\n        )\r\n    }\r\n}"]}