{"version":3,"file":"WinMenu.js","sourceRoot":"","sources":["../../../src/components/board/WinMenu.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Game, { GAMEMODE } from \"../../game\";\r\nimport { socket } from \"../../main\";\r\nimport { IPlayer } from \"../lobby/Lobby\";\r\nimport { Rematch } from \"../../App\";\r\nimport Avatar from \"../lobby/Avatar\";\r\n\r\ntype Props = {\r\n  winner: \"white\" | \"black\" | \"\";\r\n    restart: (gameId: number) => void;\r\n    game: Game;\r\n    player: IPlayer;\r\n    rematch: Rematch | undefined;\r\n};\r\ntype State = {\r\n  rematchSent: boolean;\r\n};\r\n\r\nexport default class WinMenu extends React.Component<Props, State> {\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {\r\n      rematchSent: false,\r\n    };\r\n  }\r\n  handleClick = () => {\r\n    const props = this.props;\r\n    if (this.props.game.gameMode == GAMEMODE.ONLINE && !this.props.rematch) {\r\n      const rematch = {\r\n        gameId: props.game.id,\r\n        player: props.player,\r\n        requested: true,\r\n        roomId: props.game.roomId,\r\n      };\r\n      socket.emit(\"player_wants_rematch\", rematch);\r\n      this.setState({ rematchSent: true });\r\n    } else if (this.props.rematch) {\r\n      const id = props.game.id ? props.game.id : 0;\r\n      this.props.restart(id);\r\n      socket.emit(\"restart_game\", id);\r\n    } else {\r\n      this.props.restart(0);\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    socket.on(\"rematch_accepted\", (gameId: number) => {\r\n      this.props.restart(gameId);\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    socket.off();\r\n  }\r\n\r\n  render() {\r\n    let winner: string = this.props.winner;\r\n\r\n    const playAgainClass = this.state.rematchSent\r\n      ? \"win-menu__play-again--selected\"\r\n      : \"\";\r\n    return (\r\n      <div className={\"win-menu \"}>\r\n        <h1>{winner} Wins!</h1>\r\n        <h2\r\n          className={\"win-menu__play-again \" + playAgainClass}\r\n          onClick={this.handleClick}\r\n        >\r\n          Play Again?\r\n        </h2>\r\n        {this.props.rematch && (\r\n          <div className=\"win-menu__avatar\">\r\n            <Avatar\r\n              name={this.props.player.name}\r\n              theme={this.props.player.avatar.theme}\r\n              shape={this.props.player.avatar.shape}\r\n            />\r\n          </div>\r\n        )}\r\n        {this.props.rematch && (\r\n          <h3 className={\"win-menu__rematch\"}>\r\n            {this.props.rematch.player && this.props.player.name + \" \"}\r\n            wants rematch!\r\n          </h3>\r\n        )}\r\n        {this.state.rematchSent && (\r\n          <div className=\"win-menu__waiting-pawn-div\">\r\n            <img\r\n              className={\"lobby__avatar-placeholder win-menu__waiting-pawn\"}\r\n              src={\"./img/pawn.png\"}\r\n            ></img>\r\n          </div>\r\n        )}\r\n\r\n        {this.state.rematchSent && (\r\n          <h3 className={\"win-menu__rematch\"}>\r\n            Waiting for {this.props.player.name} to accept\r\n          </h3>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}