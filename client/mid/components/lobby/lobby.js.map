{"version":3,"file":"lobby.js","sourceRoot":"","sources":["../../../src/components/lobby/lobby.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA+C;AAC/C,gDAA0B;AAC1B,mCAAoC;AACpC,sDAAgC;AAgChC;IAAmC,yBAA6B;IAQ5D,eAAY,KAAU;QAAtB,YACI,kBAAM,KAAK,CAAC,SAUf;QAeD,gBAAU,GAAG,UAAC,IAAY;YACtB,IAAI,MAAM,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAClC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,IAAI,IAAI,IAAI,EAAjB,CAAiB,CAAC,IAAI,IAAI,KAAK,KAAI,CAAC,KAAK,CAAC,IAAI,EAAE;gBACjF,IAAM,IAAI,GAAG,EAAC,MAAM,EAAE,KAAI,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,CAAA;gBACjE,aAAM,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBAC/B,aAAM,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;gBACjC,KAAI,CAAC,QAAQ,CAAC,UAAA,SAAS;oBACnB,OAAO;wBACH,KAAK,kCAAM,SAAS,CAAC,KAAK,UAAE,EAAC,IAAI,MAAA,EAAE,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAC,SAAC;wBAC5E,WAAW,EAAE,EAAC,IAAI,MAAA,EAAE,EAAE,EAAE,MAAM,EAAC;wBAC/B,aAAa,EAAE,KAAK;qBACvB,CAAA;gBACL,CAAC,CAAC,CAAC;aACN;QACL,CAAC,CAAA;QAED,eAAS,GAAG,UAAC,IAAY;YACrB,KAAI,CAAC,QAAQ,CAAC,UAAC,SAAS;gBACpB,OAAO;oBACH,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,IAAI,IAAI,IAAI,EAAjB,CAAiB,CAAC;iBAC7D,CAAA;YACL,CAAC,CAAC,CAAA;QACN,CAAC,CAAA;QAED,0BAAoB,GAAG,UAAC,KAAuB;YAC3C,IAAM,MAAM,GAAG,KAAK,CAAC,MAAqB,CAAC;YAC3C,IAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAA;YACrD,IAAM,OAAO,GAAG,MAAM,CAAC,eAAe,CAAC;YACvC,IAAM,QAAQ,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,SAAS,CAAC;YACpC,IAAI,QAAQ,EAAE;gBACV,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;aAC5B;YACD,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;QACxB,CAAC,CAAA;QAED,wBAAkB,GAAG,UAAC,KAAuB;YACzC,IAAM,MAAM,GAAG,KAAK,CAAC,MAAqB,CAAC;YAC3C,IAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAA;YAG/C,IAAI,MAAM,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,UAAC,IAAI,IAAM,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,EAAE,CAAA,CAAA,CAAC,CAAC,IAAI,KAAI,CAAC,KAAK,CAAC,aAAa,EAAE;gBAClG,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;aAC9B;QACL,CAAC,CAAA;QAED,wBAAkB,GAAG;YACjB,KAAI,CAAC,QAAQ,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;QAC3C,CAAC,CAAA;QAED,+BAAyB,GAAG,UAAC,KAAU;;YAC3B,IAAA,MAAM,GAAK,KAAK,OAAV,CAAU;YACxB,IAAI,CAAC,CAAA,MAAA,KAAI,CAAC,UAAU,CAAC,OAAO,0CAAE,QAAQ,CAAC,MAAM,CAAC,CAAA,IAAI,CAAC,CAAA,MAAA,KAAI,CAAC,aAAa,CAAC,OAAO,0CAAE,QAAQ,CAAC,MAAM,CAAC,CAAA,EAAE;gBAC7F,KAAI,CAAC,QAAQ,CAAC,EAAE,aAAa,EAAE,KAAK,EAAE,CAAC,CAAC;aAC3C;QACL,CAAC,CAAA;QAED,sBAAgB,GAAG,UAAC,KAAuC;YACvD,IAAM,MAAM,GAAG,KAAK,CAAC,MAAwB,CAAC;YAC9C,IAAM,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;YAC5C,IAAM,EAAE,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,EAAE,CAAC;YACpB,IAAM,IAAI,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,WAAW,CAAC;YAC/B,IAAI,IAAI,IAAI,EAAE,IAAI,EAAE,KAAK,QAAQ,EAAE;gBAC/B,KAAI,CAAC,QAAQ,CAAC,EAAC,WAAW,EAAE,EAAC,IAAI,MAAA,EAAE,EAAE,EAAE,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC,EAAC,CAAC,CAAA;aACjE;iBAAM;gBACH,KAAI,CAAC,QAAQ,CAAC,EAAC,WAAW,EAAE,EAAC,IAAI,EAAE,aAAa,EAAE,EAAE,EAAE,QAAQ,EAAC,EAAC,CAAC,CAAA;aACpE;YACD,IAAI,EAAE,EAAE;gBACJ,KAAI,CAAC,eAAe,CAAC,EAAE,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;aAC7C;QACL,CAAC,CAAA;QAED,qBAAe,GAAG,UAAC,EAAU,EAAE,YAAoB,EAAE,aAAkB;YACnE,IAAM,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,EAAE,IAAI,EAAE,EAAb,CAAa,CAAC,CAAC;YAC/D,IAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,IAAI,YAAY,MAAM,IAAI,IAAI,EAAE;gBAChC,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,YAAY,EAAE,EAAC,KAAK,EAAE,aAAa,EAAC,CAAC,CAAC;gBAClE,IAAM,OAAK,GAAG,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,UAAC,IAAI,IAAK,OAAA,IAAI,CAAC,EAAE,IAAI,EAAE,EAAb,CAAa,CAAC,CAAC;gBAClE,KAAI,CAAC,QAAQ,CAAC,UAAA,SAAS;oBACnB,OAAO;wBACH,KAAK,gDAAM,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,OAAK,CAAC,UAAE,IAAI,WAAK,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,OAAK,GAAG,CAAC,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,OAAC;qBACjH,CAAA;gBACL,CAAC,CAAC,CAAA;aACL;QACL,CAAC,CAAA;QAED,yBAAmB,GAAG,UAAC,KAAuB;YAC1C,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QACpC,CAAC,CAAA;QACD,0BAAoB,GAAG,UAAC,KAAuB;YAC3C,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QACrC,CAAC,CAAA;QAaD,uBAAiB,GAAG;YAChB,aAAM,CAAC,EAAE,CAAC,gBAAgB,EAAE,UAAC,OAAO;gBAChC,KAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,SAAA,EAAE,CAAC,CAAA;YAC9B,CAAC,CAAC,CAAA;YACF,aAAM,CAAC,EAAE,CAAC,cAAc,EAAE,UAAC,IAAI;gBAC3B,IAAI,KAAI,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;oBAChC,aAAM,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;iBAClC;YACL,CAAC,CAAC,CAAA;YACF,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAI,CAAC,yBAAyB,CAAC,CAAC;QAEvE,CAAC,CAAA;QA1IG,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,KAAI,CAAC,KAAK,GAAG;YACT,OAAO,EAAE,EAAE;YACX,KAAK,EAAE,CAAC,EAAC,IAAI,EAAE,aAAa,EAAE,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC;YACzE,WAAW,EAAE,EAAC,IAAI,EAAE,aAAa,EAAE,EAAE,EAAE,QAAQ,EAAC;YAChD,aAAa,EAAE,KAAK;SACvB,CAAA;QACD,KAAI,CAAC,UAAU,GAAG,eAAK,CAAC,SAAS,EAAE,CAAC;QACpC,KAAI,CAAC,aAAa,GAAG,eAAK,CAAC,SAAS,EAAE,CAAC;;IAC3C,CAAC;IAED,yBAAS,GAAT,UAAU,IAAY;QAClB,IAAI,WAAW,CAAC;QAChB,IAAI,WAAW,CAAC;QAChB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;YACxB,WAAW,GAAG,IAAI,CAAC;YACnB,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;SACjC;aAAM;YACH,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YAC9B,WAAW,GAAG,IAAI,CAAC;SACtB;QACD,OAAO,WAAW,GAAG,WAAW,CAAC;IACrC,CAAC;IA6FD,6BAAa,GAAb,UAAc,KAAuB,EAAE,KAAc;QACjD,IAAM,MAAM,GAAG,KAAK,CAAC,MAA0B,CAAC;QAChD,IAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;QACvD,IAAM,QAAQ,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,QAAQ,CAAC;QACnC,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,EAAE;YACzB,IAAM,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAC1B,IAAI,CAAC,eAAe,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;SAC5C;IACL,CAAC;IAgBD,oCAAoB,GAApB;QACI,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,yBAAyB,CAAC,CAAC;QACtE,aAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAC7B,aAAM,CAAC,GAAG,CAAC,UAAU,CAAC,CAAA;IAC1B,CAAC;IAED,sBAAM,GAAN;QAAA,iBA4DC;QA1DG,IAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,UAAC,MAAM,IAAK,OAAA,MAAM,CAAC,IAAI,IAAI,KAAI,CAAC,KAAK,CAAC,IAAI,EAA9B,CAA8B,CAAC,CAAA;QAElF,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,EAAE;YACtC,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,IAAI,IAAI,CAAC,IAAI,IAAI,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE;gBAC1C,SAAS,GAAG,sBAAsB,CAAC;aACtC;YACD,IAAI,IAAI,CAAC,MAAM,EAAE;gBACb,SAAS,IAAI,sBAAsB,CAAA;aACtC;YACD,IAAI,cAAc,GAAI,EAAE,CAAC;YACzB,IAAI,IAAI,CAAC,KAAK,EAAE;gBACZ,cAAc,GAAG,4BAA4B,CAAA;aAChD;iBAAM;gBACH,cAAc,GAAG,2BAA2B,CAAA;aAC/C;YACD,OAAO,uCAAK,SAAS,EAAC,qBAAqB,EAAC,GAAG,EAAE,EAAE,EAAE,WAAW,EAAE,KAAI,CAAC,mBAAmB,EAAE,YAAY,EAAE,KAAI,CAAC,oBAAoB;gBACvH,uCAAK,SAAS,EAAE,wBAAwB,GAAG,SAAS,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,OAAO,EAAE,KAAI,CAAC,gBAAgB,IAAG,IAAI,CAAC,IAAI,CAAO;gBAC5H,IAAI,CAAC,EAAE,IAAI,QAAQ,IAAK,uCAAK,SAAS,EAAE,oBAAoB,GAAG,cAAc,EAAE,OAAO,EAAE,KAAI,CAAC,oBAAoB;oBAC9G,qCAAG,SAAS,EAAC,qBAAqB,GAAK,CACrC,CACJ,CAAA;QAElB,CAAC,CAAC,CAAA;QAEF,IAAI,kBAAkB,GAAG,EAAE,CAAC;QAC5B,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;YAC1B,kBAAkB,GAAG,+BAA+B,CAAC;SACxD;QAED,OAAO,CACH,uCAAK,SAAS,EAAC,OAAO;YAClB,uCAAK,SAAS,EAAC,sBAAsB,aAE/B;YACN,uCAAK,SAAS,EAAC,gBAAgB,EAAC,GAAG,EAAE,IAAI,CAAC,UAAU;gBAChD,8BAAC,iBAAO,IAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAChC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,EACnC,kBAAkB,EAAE,IAAI,CAAC,kBAAkB,EAC3C,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,GACzB;oBACA;YACN,uCAAK,SAAS,EAAC,cAAc;gBACxB,KAAK;gBACN,uCACI,SAAS,EAAE,mCAAmC,GAAG,kBAAkB,EACnE,OAAO,EAAE,IAAI,CAAC,kBAAkB,EAAE,GAAG,EAAE,IAAI,CAAC,aAAa;oBACzD,qCAAG,SAAS,EAAC,gBAAgB,GAAK,CAChC,CACJ;YACL,MAAM,IAAI,8BAAC,cAAI,IAAC,MAAM,EAAE,MAAM,EAC9B,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,EAClC,UAAU,EAAE,IAAI,CAAC,UAAU,EAC3B,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EACvB,eAAe,EAAE,IAAI,CAAC,eAAe,GACnC,CACF,CACT,CAAA;IACL,CAAC;IACL,YAAC;AAAD,CAAC,AAxND,CAAmC,eAAK,CAAC,SAAS,GAwNjD","sourcesContent":["import React, { MouseEvent, Ref } from \"react\";\r\nimport Chat from \"./chat\";\r\nimport { socket } from \"../../main\";\r\nimport Players from \"./players\";\r\n\r\n\r\n\r\nexport interface IPlayer {\r\n    name: string,\r\n    avatar: {\r\n        theme: string,\r\n        shape: string,\r\n    },\r\n    id: string,\r\n}\r\n\r\ntype Props = {\r\n\r\n}\r\ntype State = {\r\n    players: IPlayer[],\r\n    rooms: {\r\n        name: string,\r\n        id: string,\r\n        unread: boolean,\r\n        hover: boolean,\r\n    }[],\r\n    currentRoom: {\r\n        name: string,\r\n        id: string\r\n    },\r\n    roomInvitable: boolean,\r\n}\r\n\r\n\r\nexport default class Lobby extends React.Component<Props, State> {\r\n\r\n    props: {\r\n        name: string,\r\n    }\r\n    playersRef: React.RefObject<HTMLDivElement>\r\n    createRoomRef: React.RefObject<HTMLDivElement>\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.props = props;\r\n        this.state = {\r\n            players: [],\r\n            rooms: [{name: \"global room\", id: \"global\", unread: false, hover: false}],\r\n            currentRoom: {name: \"global room\", id: \"global\"},\r\n            roomInvitable: false,\r\n        }\r\n        this.playersRef = React.createRef();\r\n        this.createRoomRef = React.createRef();\r\n    }\r\n\r\n    getRoomId(name: string) {\r\n        let roomIdPart1;\r\n        let roomIdPart2;\r\n        if (name > this.props.name) {\r\n            roomIdPart1 = name;\r\n            roomIdPart2 = this.props.name;\r\n        } else {\r\n            roomIdPart1 = this.props.name;\r\n            roomIdPart2 = name;\r\n        }\r\n        return roomIdPart1 + roomIdPart2; \r\n    }\r\n\r\n    createRoom = (name: string) => {\r\n        let roomId = this.getRoomId(name);\r\n        if (!this.state.rooms.some((room) => room.name == name) && name !== this.props.name) {\r\n            const room = {author: this.props.name, target: name, id: roomId }\r\n            socket.emit(\"join_room\", room);\r\n            socket.emit(\"create_room\", room);\r\n            this.setState(prevState => {\r\n                return {\r\n                    rooms: [...prevState.rooms, {name, id: roomId, unread: false, hover: false}],\r\n                    currentRoom: {name, id: roomId},\r\n                    roomInvitable: false,\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    closeRoom = (name: string) => {\r\n        this.setState((prevState) => {\r\n            return {\r\n                rooms: prevState.rooms.filter((room) => room.name != name)\r\n            }\r\n        })\r\n    }\r\n\r\n    handleClickCloseRoom = (event: React.MouseEvent) => {\r\n        const target = event.target as HTMLElement;\r\n        const wrapper = target.closest('.lobby__room-wraper')\r\n        const roomDiv = target.previousSibling;\r\n        const roomName = roomDiv?.nodeValue;\r\n        if (roomName) {\r\n            this.closeRoom(roomName);\r\n        }\r\n        console.log(roomDiv)\r\n    }\r\n\r\n    handlePlayerInvite = (event: React.MouseEvent) => {\r\n        const target = event.target as HTMLElement;\r\n        const player = target.closest(\".lobby__player\")\r\n        \r\n     \r\n        if (player && !this.state.rooms.some((room) => {room.name == player.id}) && this.state.roomInvitable) {\r\n            this.createRoom(player.id);\r\n        }\r\n    }\r\n\r\n    handleClickNewRoom = () => {\r\n        this.setState({ roomInvitable: true });\r\n    }\r\n\r\n    handleOutsidePlayersClick = (event: any) => {\r\n        const { target } = event\r\n        if (!this.playersRef.current?.contains(target) && !this.createRoomRef.current?.contains(target)) {\r\n            this.setState({ roomInvitable: false });\r\n        }\r\n    }\r\n\r\n    handleSwitchRoom = (event: React.MouseEvent<HTMLDivElement>) => {\r\n        const target = event.target as HTMLDivElement;\r\n        const room = target.closest(\".lobby__room\");\r\n        const id = room?.id;\r\n        const name = room?.textContent;\r\n        if (name && id && id !== \"global\") {\r\n            this.setState({currentRoom: {name, id: this.getRoomId(name)}})\r\n        } else {\r\n            this.setState({currentRoom: {name: \"global room\", id: \"global\"}})\r\n        }\r\n        if (id) {\r\n            this.setRoomProperty(id, \"unread\", false);\r\n        }\r\n    }\r\n\r\n    setRoomProperty = (id: string, propertyName: string, propertyValue: any) => {\r\n        const rooms = this.state.rooms.filter((room) => room.id == id);\r\n        const room = rooms[0];\r\n        if (room instanceof Object && room) {\r\n            Object.defineProperty(room, propertyName, {value: propertyValue});\r\n            const index = this.state.rooms.findIndex((room) => room.id == id);\r\n            this.setState(prevState => {\r\n                return {\r\n                    rooms: [...prevState.rooms.slice(0, index), room, ...prevState.rooms.slice(index + 1, prevState.rooms.length)]\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    handleMouseOverRoom = (event: React.MouseEvent) => {\r\n        this.roomMouseMove(event, true);\r\n    }\r\n    handleMouseLeaveRoom = (event: React.MouseEvent) => {\r\n        this.roomMouseMove(event, false);\r\n    }\r\n    roomMouseMove(event: React.MouseEvent, hover: boolean) {\r\n        const target = event.target as HTMLInputElement;\r\n        const wrapper = target.closest(\".lobby__room-wrapper\");\r\n        const children = wrapper?.children;\r\n        if (children && children[0]) {\r\n            const id = children[0].id;\r\n            this.setRoomProperty(id, \"hover\", hover);\r\n        } \r\n    }\r\n\r\n\r\n\r\n    componentDidMount = () => {\r\n        socket.on(\"players_update\", (players) => {\r\n            this.setState({ players })\r\n        })\r\n        socket.on(\"room_created\", (room) => {\r\n            if (this.props.name == room.target) {\r\n                socket.emit(\"join_room\", room);\r\n            }\r\n        })\r\n        document.addEventListener('click', this.handleOutsidePlayersClick);\r\n\r\n    }\r\n    componentWillUnmount() {\r\n        document.removeEventListener('click', this.handleOutsidePlayersClick);\r\n        socket.off(\"players_update\");\r\n        socket.off(\"get_room\")\r\n    }\r\n\r\n    render() {\r\n\r\n        const player = this.state.players.find((player) => player.name == this.props.name)\r\n\r\n        let rooms = this.state.rooms.map((room, id) => {\r\n            let roomClass = \"\";\r\n            if (room.name == this.state.currentRoom.name) {\r\n                roomClass = \"lobby__room--current\";\r\n            }\r\n            if (room.unread) {\r\n                roomClass += \" lobby__room--unread\"\r\n            }\r\n            let closeRoomClass =  \"\";\r\n            if (room.hover) {\r\n                closeRoomClass = \"lobby__close-room--visible\"\r\n            } else {\r\n                closeRoomClass = \"lobby__close-room--hidden\"\r\n            }\r\n            return <div className=\"lobby__room-wrapper\" key={id} onMouseOver={this.handleMouseOverRoom} onMouseLeave={this.handleMouseLeaveRoom}>\r\n                        <div className={\"lobby__room no-select \" + roomClass} id={room.id} key={id} onClick={this.handleSwitchRoom}>{room.name}</div>\r\n                        {room.id != \"global\" &&  <div className={\"lobby__close-room \" + closeRoomClass} onClick={this.handleClickCloseRoom}>\r\n                            <i className=\"icon-cancel-circled\"></i>    \r\n                        </div> }  \r\n                    </div> \r\n            \r\n        })\r\n\r\n        let newRoomButtonClass = \"\";\r\n        if (this.state.roomInvitable) {\r\n            newRoomButtonClass = \"lobby__new-room-button--green\";\r\n        }\r\n\r\n        return (\r\n            <div className=\"lobby\">\r\n                <div className=\"lobby__invite-button\">\r\n                    Invite\r\n                </div>\r\n                <div className=\"lobby__players\" ref={this.playersRef}>\r\n                    <Players players={this.state.players}\r\n                        invitable={this.state.roomInvitable}\r\n                        handlePlayerInvite={this.handlePlayerInvite}\r\n                        rooms={this.state.rooms}\r\n                    />;\r\n                </div>\r\n                <div className=\"lobby__rooms\">\r\n                    {rooms}\r\n                    <div\r\n                        className={\"lobby__new-room-button no-select \" + newRoomButtonClass}\r\n                        onClick={this.handleClickNewRoom} ref={this.createRoomRef}>\r\n                        <i className=\"icon-user-plus\"></i>\r\n                    </div>\r\n                </div>\r\n                {player && <Chat player={player}\r\n                 currentRoom={this.state.currentRoom}\r\n                  createRoom={this.createRoom} \r\n                  rooms={this.state.rooms}\r\n                  setRoomProperty={this.setRoomProperty}\r\n                  />}\r\n            </div>\r\n        )\r\n    }\r\n}"]}