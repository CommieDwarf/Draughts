{"version":3,"file":"lobby.js","sourceRoot":"","sources":["../../../src/components/lobby/lobby.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { MouseEvent, Ref } from \"react\";\r\nimport Chat from \"./chat\";\r\nimport { socket } from \"../../main\";\r\nimport Players from \"./players\";\r\nimport Room from \"./room\";\r\nimport { GAMEMODE } from \"../../game\";\r\nimport { SIDE } from \"../../config\";\r\nimport GameInviation from \"./gameInvitation\";\r\nimport GameInvSent from \"./GameInvSent\";\r\n\r\nexport interface IPlayer {\r\n  name: string;\r\n  avatar: {\r\n    theme: string;\r\n    shape: string;\r\n  };\r\n  id: string;\r\n}\r\n\r\ntype Room = {\r\n  name: string;\r\n  id: string;\r\n  unread: boolean;\r\n  hover: boolean;\r\n  isWriting: boolean;\r\n};\r\n\r\ntype GameInfo = {\r\n  gameId: number;\r\n  playerAccepted: string;\r\n  playerAcceptedColor: string;\r\n  roomId: string;\r\n};\r\n\r\ntype Color = \"white\" | \"black\";\r\n\r\ntype Props = {};\r\ntype State = {\r\n  players: IPlayer[];\r\n  rooms: Room[];\r\n  currentRoom: Room;\r\n  roomInvitable: boolean;\r\n  gameInvitable: boolean;\r\n  gameInvitations: {\r\n    gameId: number;\r\n    author: string;\r\n    target: string;\r\n    roomId: string;\r\n  }[];\r\n  gameInvSent: {\r\n    gameId: number;\r\n    author: string;\r\n    target: string;\r\n    roomId: string;\r\n  }[];\r\n};\r\n\r\nexport default class Lobby extends React.Component<Props, State> {\r\n  props: {\r\n    name: string;\r\n    startNewGame: (\r\n      gameMode: GAMEMODE,\r\n      side: SIDE,\r\n      color: Color,\r\n      label: string,\r\n      gameId: number,\r\n      roomId: string\r\n    ) => boolean;\r\n  };\r\n  playersRef: React.RefObject<HTMLDivElement>;\r\n  createRoomRef: React.RefObject<HTMLDivElement>;\r\n  inviteRef: React.RefObject<HTMLDivElement>;\r\n  roomsRef: React.RefObject<HTMLDivElement>;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.props = props;\r\n    this.state = {\r\n      players: [],\r\n      currentRoom: {\r\n        name: \"global room\",\r\n        id: \"global\",\r\n        unread: false,\r\n        hover: false,\r\n        isWriting: false,\r\n      },\r\n      rooms: [\r\n        {\r\n          name: \"global room\",\r\n          id: \"global\",\r\n          unread: false,\r\n          hover: false,\r\n          isWriting: false,\r\n        },\r\n      ],\r\n      roomInvitable: false,\r\n      gameInvitable: false,\r\n      gameInvitations: [],\r\n      gameInvSent: [],\r\n    };\r\n    this.playersRef = React.createRef();\r\n    this.createRoomRef = React.createRef();\r\n    this.inviteRef = React.createRef();\r\n    this.roomsRef = React.createRef();\r\n  }\r\n\r\n  handleClickInvite = () => {\r\n    this.setState({ gameInvitable: true });\r\n  };\r\n\r\n  getGameRoomId(playerName1: string, playerName2: string) {\r\n    if (playerName1 > playerName2) {\r\n      return playerName1 + playerName2 + \"-game\";\r\n    } else {\r\n      return playerName2 + playerName1 + \"-game\";\r\n    }\r\n  }\r\n\r\n  getRoomId(name: string) {\r\n    let roomIdPart1;\r\n    let roomIdPart2;\r\n    if (name > this.props.name) {\r\n      roomIdPart1 = name;\r\n      roomIdPart2 = this.props.name;\r\n    } else {\r\n      roomIdPart1 = this.props.name;\r\n      roomIdPart2 = name;\r\n    }\r\n    return roomIdPart1 + roomIdPart2;\r\n  }\r\n\r\n  getGameId() {\r\n    return Date.now();\r\n  }\r\n\r\n  createRoom = (name: string) => {\r\n    let roomId = this.getRoomId(name);\r\n    if (\r\n      !this.state.rooms.some((room) => room.name == name) &&\r\n      name !== this.props.name\r\n    ) {\r\n      const room = { author: this.props.name, target: name, id: roomId };\r\n      socket.emit(\"join_room\", room);\r\n      socket.emit(\"create_room\", room);\r\n      this.setState((prevState) => {\r\n        const room = {\r\n          name,\r\n          id: roomId,\r\n          unread: false,\r\n          hover: false,\r\n          isWriting: false,\r\n        };\r\n        return {\r\n          rooms: [...prevState.rooms, room],\r\n          currentRoom: room,\r\n          roomInvitable: false,\r\n        };\r\n      });\r\n    }\r\n  };\r\n\r\n  closeRoom = (name: string) => {\r\n    this.setState((prevState) => {\r\n      return {\r\n        rooms: prevState.rooms.filter((room) => room.name != name),\r\n      };\r\n    });\r\n  };\r\n\r\n  acceptChallange = (name: string, gameId: number, roomId: string) => {\r\n    let randomNum = Math.floor(Math.random() * 2);\r\n    let authorColor: Color;\r\n    if (randomNum == 0) {\r\n      authorColor = \"white\";\r\n    } else {\r\n      authorColor = \"black\";\r\n    }\r\n    let side = authorColor == \"white\" ? SIDE.NORMAL : SIDE.REVERSED;\r\n    this.props.startNewGame(\r\n      GAMEMODE.ONLINE,\r\n      side,\r\n      authorColor,\r\n      name,\r\n      gameId,\r\n      roomId\r\n    );\r\n    let gameInfo = {\r\n      roomId,\r\n      gameId,\r\n      playerAccepted: this.props.name,\r\n      playerAcceptedColor: authorColor,\r\n    };\r\n    socket.emit(\"accept_challange\", gameInfo);\r\n    this.filterOutGameInvites(name);\r\n  };\r\n\r\n  filterOutGameInvites = (name: string) => {\r\n    this.setState((prevState) => {\r\n      return {\r\n        gameInvitations: prevState.gameInvitations.filter(\r\n          (inv) => inv.author != name\r\n        ),\r\n      };\r\n    });\r\n  };\r\n  filterOutSentInvites = (name: string) => {\r\n    this.setState((prevState) => {\r\n      return {\r\n        gameInvSent: prevState.gameInvSent.filter((inv) => inv.target != name),\r\n      };\r\n    });\r\n  };\r\n\r\n  handlePlayerInvite = (event: React.MouseEvent) => {\r\n    const target = event.target as HTMLElement;\r\n    const player = target.closest(\".lobby__player\");\r\n\r\n    if (\r\n      player &&\r\n      !this.state.rooms.some((room) => {\r\n        room.name == player.id;\r\n      }) &&\r\n      this.state.roomInvitable\r\n    ) {\r\n      this.createRoom(player.id);\r\n    }\r\n    if (player && this.state.gameInvitable && player.id != this.props.name) {\r\n      const gameRoomId = this.getGameRoomId(player.id, this.props.name);\r\n      const gameId = this.getGameId();\r\n      socket.emit(\"request_join_game\", { author: this.props.name, gameId });\r\n      socket.emit(\"join_game\", gameRoomId);\r\n      this.setState({ gameInvitable: false });\r\n      if (!this.state.gameInvSent.some((inv) => inv.target == player.id)) {\r\n        const inv = {\r\n          target: player.id,\r\n          gameId,\r\n          author: this.props.name,\r\n          roomId: gameRoomId,\r\n        };\r\n        this.setState((prevState) => {\r\n          return {\r\n            gameInvSent: [...prevState.gameInvSent, inv],\r\n          };\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleClickNewRoom = () => {\r\n    this.setState({ roomInvitable: true });\r\n  };\r\n\r\n  handleOutsidePlayersClick = (event: any) => {\r\n    const { target } = event;\r\n    if (!this.playersRef.current?.contains(target)) {\r\n      if (!this.createRoomRef.current?.contains(target)) {\r\n        this.setState({ roomInvitable: false });\r\n      }\r\n      if (!this.inviteRef.current?.contains(target)) {\r\n        this.setState({ gameInvitable: false });\r\n      }\r\n    }\r\n  };\r\n\r\n  switchRoom = (room: Room) => {\r\n    if (room.id !== \"global\") {\r\n      this.setState({ currentRoom: room });\r\n    } else {\r\n      this.setState((prevState) => {\r\n        return {\r\n          currentRoom: prevState.rooms[0],\r\n        };\r\n      });\r\n    }\r\n    this.setRoomProperty(room.id, \"unread\", false);\r\n  };\r\n\r\n  setRoomProperty = (id: string, propertyName: string, propertyValue: any) => {\r\n    const rooms = this.state.rooms.filter((room) => room.id == id);\r\n    const room = rooms[0];\r\n    if (room instanceof Object && room) {\r\n      Object.defineProperty(room, propertyName, { value: propertyValue });\r\n      const index = this.state.rooms.findIndex((room) => room.id == id);\r\n      this.setState((prevState) => {\r\n        return {\r\n          rooms: [\r\n            ...prevState.rooms.slice(0, index),\r\n            room,\r\n            ...prevState.rooms.slice(index + 1, prevState.rooms.length),\r\n          ],\r\n        };\r\n      });\r\n      if (room.id == this.state.currentRoom.id) {\r\n        this.setState({ currentRoom: room });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleScroll = (event: React.WheelEvent) => {\r\n    if (event.deltaY < 0) {\r\n      this.roomsRef.current?.scrollBy(-30, 0);\r\n    } else if (event.deltaY > 0) {\r\n      this.roomsRef.current?.scrollBy(30, 0);\r\n    }\r\n    return false;\r\n  };\r\n\r\n  handleMouseOver = () => {\r\n    document.body.setAttribute(\"style\", \"overflow-y: hidden\")\r\n  };\r\n  handleMouseLeave = () => {\r\n    document.body.setAttribute(\"style\", \"overflow-y: auto\");\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    socket.on(\"players_update\", (players) => {\r\n      this.setState({ players });\r\n    });\r\n    socket.on(\"room_created\", (room) => {\r\n      if (this.props.name == room.target) {\r\n        socket.emit(\"join_room\", room);\r\n      }\r\n    });\r\n\r\n    socket.on(\"someone_writing\", (room) => {\r\n      this.setRoomProperty(room.id, \"isWriting\", true);\r\n    });\r\n    socket.on(\"done_writing\", (room) => {\r\n      this.setRoomProperty(room.id, \"isWriting\", false);\r\n    });\r\n\r\n    socket.on(\"requested_join_game\", ({ author, gameId }) => {\r\n      const roomId = this.getGameRoomId(author, this.props.name);\r\n      socket.emit(\"join_game\", roomId);\r\n      if (!this.state.gameInvitations.some((inv) => inv.gameId == gameId)) {\r\n        this.setState((prevState) => {\r\n          return {\r\n            gameInvitations: [\r\n              ...prevState.gameInvitations,\r\n              { author, gameId, target: this.props.name, roomId },\r\n            ],\r\n          };\r\n        });\r\n      }\r\n    });\r\n\r\n    socket.on(\"challange_accepted\", (gameInfo: GameInfo) => {\r\n      let color: Color;\r\n      color = gameInfo.playerAcceptedColor == \"white\" ? \"black\" : \"white\";\r\n      let side = color == \"white\" ? SIDE.NORMAL : SIDE.REVERSED;\r\n\r\n      this.props.startNewGame(\r\n        GAMEMODE.ONLINE,\r\n        side,\r\n        color,\r\n        gameInfo.playerAccepted,\r\n        gameInfo.gameId,\r\n        gameInfo.roomId\r\n      );\r\n      this.filterOutSentInvites(gameInfo.playerAccepted);\r\n    });\r\n\r\n    socket.on(\"player_disconnected\", (player) => {\r\n      this.filterOutGameInvites(player.name);\r\n      this.filterOutSentInvites(player.name);\r\n    });\r\n\r\n    document.addEventListener(\"click\", this.handleOutsidePlayersClick);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"click\", this.handleOutsidePlayersClick);\r\n    socket.off();\r\n  }\r\n\r\n  render() {\r\n    const player = this.state.players.find(\r\n      (player) => player.name == this.props.name\r\n    );\r\n\r\n    let rooms = this.state.rooms.map((room, id) => {\r\n      return (\r\n        <Room\r\n          closeRoom={this.closeRoom}\r\n          setRoomProperty={this.setRoomProperty}\r\n          switchRoom={this.switchRoom}\r\n          room={room}\r\n          currentRoom={this.state.currentRoom}\r\n          key={id}\r\n        />\r\n      );\r\n    });\r\n\r\n    const gameInvitations = this.state.gameInvitations.map((inv, i) => {\r\n      return (\r\n        <GameInviation\r\n          author={inv.author}\r\n          gameId={inv.gameId}\r\n          key={i}\r\n          target={inv.target}\r\n          acceptChallange={this.acceptChallange}\r\n          roomId={inv.roomId}\r\n        />\r\n      );\r\n    });\r\n\r\n    const gameInvSent = this.state.gameInvSent.map((inv, i) => {\r\n      return <GameInvSent target={inv.target} key={i} />;\r\n    });\r\n\r\n    let inviteClass = \"\";\r\n    if (this.state.gameInvitable) {\r\n      inviteClass = \"lobby__invite-button--green\";\r\n    }\r\n\r\n    let newRoomButtonClass = \"\";\r\n    if (this.state.roomInvitable) {\r\n      newRoomButtonClass = \"lobby__new-room-button--green\";\r\n    }\r\n    return (\r\n      <div className=\"lobby\">\r\n        <div\r\n          className={\"lobby__invite-button no-select \" + inviteClass}\r\n          ref={this.inviteRef}\r\n          onClick={this.handleClickInvite}\r\n        >\r\n          Invite\r\n        </div>\r\n        <div className=\"lobby__game-invitation\">\r\n          {gameInvitations}\r\n          {gameInvSent}\r\n        </div>\r\n        <div className=\"lobby__players\" ref={this.playersRef}>\r\n          <Players\r\n            players={this.state.players}\r\n            roomInvitable={this.state.roomInvitable}\r\n            gameInvitable={this.state.gameInvitable}\r\n            handlePlayerInvite={this.handlePlayerInvite}\r\n            rooms={this.state.rooms}\r\n          />\r\n          ;\r\n        </div>\r\n        <div\r\n          className=\"lobby__rooms\"\r\n          ref={this.roomsRef}\r\n          onMouseOver={this.handleMouseOver}\r\n          onMouseLeave={this.handleMouseLeave}\r\n          onWheel={this.handleScroll}\r\n        >\r\n          {rooms}\r\n          <div\r\n            className={\"lobby__new-room-button no-select \" + newRoomButtonClass}\r\n            onClick={this.handleClickNewRoom}\r\n            ref={this.createRoomRef}\r\n          >\r\n            <i className=\"icon-user-plus\"></i>\r\n          </div>\r\n        </div>\r\n        {player && (\r\n          <Chat\r\n            player={player}\r\n            currentRoom={this.state.currentRoom}\r\n            createRoom={this.createRoom}\r\n            rooms={this.state.rooms}\r\n            setRoomProperty={this.setRoomProperty}\r\n            isWriting={this.state.currentRoom.isWriting}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}